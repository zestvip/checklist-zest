<!doctype html>
<html lang="pt-br">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Checklist de Mala ‚Äî Zest</title>

  <style>
    :root{
      --bg:#B3D9EB;
      --card:#F9F7E1;
      --text:#1f1f1f;
      --muted:#6b7280;

      --line:#e4e2cf;
      --pill:#f1f2ec;
      --radius:18px;
      --shadow:0 6px 18px rgba(0,0,0,.06);

      --accent:#00BDA9;
      --soft:#B3D9EB;
      --deep:#123826;
    }

    *{ box-sizing:border-box; }

    body{
      margin:0;
      background:var(--bg);
      color:var(--text);
      font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Inter,Arial,sans-serif;
      line-height:1.5;
      padding:18px;
    }

    .wrap{ max-width:560px; margin:0 auto; }

    .card{
      background:var(--card);
      border:1px solid var(--line);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      overflow:hidden;
    }

    header{
      padding:18px 18px 12px 18px;
      border-bottom:1px solid var(--line);
    }

    .brand{
      display:flex;
      justify-content:center;
      align-items:center;
      gap:10px;
      margin-bottom:10px;
    }
    .brand img{ height:34px; object-fit:contain; display:block; }

    h1{
      font-size:18px;
      margin:0;
      text-align:center;
      letter-spacing:.2px;
    }

    .subtitle{
      text-align:center;
      margin:8px 0 0 0;
      color:var(--muted);
      font-size:13px;
    }

    .actions{
      display:flex;
      gap:10px;
      padding:12px 18px;
      border-bottom:1px solid var(--line);
      flex-wrap:wrap;
    }

    button{
      border:1px solid var(--line);
      background:var(--card);
      padding:10px 12px;
      border-radius:12px;
      font-size:14px;
      cursor:pointer;
      transition:transform .05s ease, background .15s ease, border-color .15s ease;
    }
    button:hover{ background:var(--pill); }
    button:active{ transform:translateY(1px); }

    .ghost{ background:transparent; }
    .ghost:hover{
      background:rgba(18,56,38,.06);
      border-color:rgba(18,56,38,.18);
    }
    #clearAll{ border-color:rgba(18,56,38,.18); }

    details{
      border-bottom:1px solid var(--line);
      padding:0 18px;
    }

    summary{
      list-style:none;
      cursor:pointer;
      padding:14px 0;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      user-select:none;
    }
    summary::-webkit-details-marker{ display:none; }

    .secTitle{
      display:flex;
      gap:10px;
      align-items:center;
      font-weight:800;
      font-size:15px;
      color:var(--deep);
    }

    .count{
      font-size:12px;
      color:var(--muted);
      background:var(--pill);
      border:1px solid var(--line);
      padding:4px 8px;
      border-radius:999px;
      white-space:nowrap;
    }

    .items{
      padding:0 0 14px 0;
      display:flex;
      flex-direction:column;
      gap:10px;
    }

    label{
      display:flex;
      gap:10px;
      align-items:flex-start;
      padding:10px 10px;
      border:1px solid var(--line);
      border-radius:14px;
      background:var(--card);
      transition:background .15s ease, border-color .15s ease;
    }
    label:hover{
      background:rgba(179,217,235,.22);
      border-color:rgba(18,56,38,.14);
    }

    input[type="checkbox"]{
      margin-top:3px;
      width:18px;
      height:18px;
      flex:0 0 auto;
      accent-color:var(--accent);
      cursor:pointer;
    }

    .txt{ display:flex; flex-direction:column; gap:2px; }
    .sub{ font-size:12px; color:var(--muted); }

    label.checked{ opacity:.75; }
    label.checked .txt{ text-decoration:line-through; }

    /* Bloco ‚ÄúMarque aqui se‚Ä¶‚Äù */
    .gate{
      padding:14px 18px;
      border-bottom:1px solid var(--line);
    }
    .gateTitle{
      font-weight:900;
      color:var(--deep);
      margin:0 0 10px 0;
      font-size:14px;
    }
    .gateGroupTitle{
      margin:10px 0 6px 0;
      font-weight:900;
      color:var(--deep);
      font-size:13px;
    }

    /* Sub-se√ß√µes visuais (dentro de um details) */
    .subsectionTitle{
      margin:10px 0 2px 0;
      padding:10px 12px;
      border:1px solid rgba(18,56,38,.14);
      border-radius:14px;
      background:rgba(18,56,38,.06);
      color:var(--deep);
      font-weight:900;
      font-size:13px;
      letter-spacing:.2px;
    }

    /* Caixas de aviso */
    .noteBox{
      border:1px solid rgba(18,56,38,.14);
      background:rgba(179,217,235,.20);
      border-radius:14px;
      padding:10px 12px;
      color:var(--text);
      font-size:12.5px;
      line-height:1.45;
    }
    .noteBox strong{ color:var(--deep); }

    /* Se√ß√µes condicionais */
    .conditional[hidden]{ display:none !important; }

    /* Anota√ß√µes */
    .notesWrap{
      padding:0 18px 18px 18px;
      border-bottom:1px solid var(--line);
    }
    .notesTitle{
      margin:18px 0 10px 0;
      font-weight:900;
      font-size:15px;
      color:var(--deep);
    }
    textarea{
      width:100%;
      min-height:110px;
      padding:12px;
      border:1px solid var(--line);
      border-radius:14px;
      font-size:14px;
      resize:vertical;
      outline:none;
      background:var(--card);
      color:var(--text);
    }
    textarea:focus{
      border-color:rgba(0,189,169,.55);
      box-shadow:0 0 0 4px rgba(0,189,169,.10);
    }

    footer{
      padding:14px 18px 18px 18px;
      color:var(--muted);
      font-size:12px;
    }
    .sig{
      margin-top:12px;
      color:var(--deep);
      font-weight:900;
      line-height:1.35;
    }
    .pagebreak{ height:12px; }
    @media print{
      .pagebreak{ break-before: page; page-break-before: always; }
    }
  </style>
</head>

<body>
  <div class="wrap">
    <div class="card">
      <header>
        <div class="brand">
          <img src="logo-zest-ceu.png" alt="Zest">
        </div>

        <h1>Checklist de Mala</h1>
        <p class="subtitle">
          Comece pela base e marque os ‚Äúitens extras‚Äù conforme o tipo de viagem, clima, destino e perfil.
          As marca√ß√µes ficam salvas neste dispositivo.
        </p>
      </header>

      <div class="actions">
        <button id="expandAll" class="ghost" type="button">Abrir categorias</button>
        <button id="collapseAll" class="ghost" type="button">Fechar categorias</button>
        <button id="clearAll" type="button">Desmarcar tudo</button>
      </div>

      <!-- MARQUE AQUI SE... (itens extras) -->
      <div class="gate">
        <div class="gateTitle">‚úÖ Itens extras ‚Äî marque o que se aplica</div>

        <div class="gateGroupTitle">üåç Tipo de viagem</div>
        <div class="items" style="padding:0;">
          <label>
            <input type="checkbox" class="gateToggle" data-gate-id="gate_nacional" data-show="sec-nacional" data-prefix="nac_">
            <span class="txt">Viagem nacional</span>
          </label>
          <label>
            <input type="checkbox" class="gateToggle" data-gate-id="gate_internacional" data-show="sec-internacional" data-prefix="inter_">
            <span class="txt">Viagem internacional</span>
          </label>
        </div>

        <div class="gateGroupTitle">üå¶Ô∏è Clima</div>
        <div class="items" style="padding:0;">
          <label>
            <input type="checkbox" class="gateToggle" data-gate-id="gate_calor" data-show="sec-calor" data-prefix="calor_">
            <span class="txt">Calor</span>
          </label>
          <label>
            <input type="checkbox" class="gateToggle" data-gate-id="gate_meia" data-show="sec-meia" data-prefix="meia_">
            <span class="txt">Meia-esta√ß√£o</span>
          </label>
          <label>
            <input type="checkbox" class="gateToggle" data-gate-id="gate_frio" data-show="sec-frio" data-prefix="frio_">
            <span class="txt">Frio</span>
          </label>
          <label>
            <input type="checkbox" class="gateToggle" data-gate-id="gate_neve" data-show="sec-neve" data-prefix="neve_">
            <span class="txt">Neve / esqui <span class="sub">(ativa ‚ÄúFrio‚Äù automaticamente)</span></span>
          </label>
        </div>

        <div class="gateGroupTitle">üèñÔ∏è Tipo de destino</div>
        <div class="items" style="padding:0;">
          <label>
            <input type="checkbox" class="gateToggle" data-gate-id="gate_praia" data-show="sec-praia" data-prefix="praia_">
            <span class="txt">Praia <span class="sub">(ativa ‚ÄúCalor‚Äù automaticamente)</span></span>
          </label>
          <label>
            <input type="checkbox" class="gateToggle" data-gate-id="gate_cidade" data-show="sec-cidade" data-prefix="cidade_">
            <span class="txt">Cidade</span>
          </label>
          <label>
            <input type="checkbox" class="gateToggle" data-gate-id="gate_natureza" data-show="sec-natureza" data-prefix="natureza_">
            <span class="txt">Natureza / campo</span>
          </label>
          <label>
            <input type="checkbox" class="gateToggle" data-gate-id="gate_cruzeiro" data-show="sec-cruzeiro" data-prefix="cruz_">
            <span class="txt">Cruzeiro</span>
          </label>
        </div>

        <div class="gateGroupTitle">üë®‚Äçüë©‚Äçüëß Perfil de quem viaja</div>
        <div class="items" style="padding:0;">
          <label>
            <input type="checkbox" class="gateToggle" data-gate-id="gate_bebe" data-show="sec-bebe" data-prefix="bebe_">
            <span class="txt">Com beb√™s (0 a 2 anos)</span>
          </label>
          <label>
            <input type="checkbox" class="gateToggle" data-gate-id="gate_crianca" data-show="sec-crianca" data-prefix="crianca_">
            <span class="txt">Com crian√ßas (3 a 12 anos)</span>
          </label>
        </div>
      </div>

      <!-- BASE ‚Äî DOCUMENTOS E ITENS PR√ÅTICOS -->
      <details open>
        <summary>
          <div class="secTitle">Documentos e itens pr√°ticos (base)</div>
          <div class="count" data-count="doc">0/0</div>
        </summary>

        <div class="items">
          <label><input type="checkbox" data-id="doc_rg_passaporte"><span class="txt">RG / passaporte <span class="sub">(se aplic√°vel)</span></span></label>
          <label><input type="checkbox" data-id="doc_cartoes_credito"><span class="txt">Cart√µes de cr√©dito <span class="sub">(com aviso de viagem j√° feito no banco)</span></span></label>
          <label><input type="checkbox" data-id="doc_prepagos"><span class="txt">Cart√µes pr√©-pagos <span class="sub">(Wise, Nomad, etc.)</span></span></label>
          <label><input type="checkbox" data-id="doc_etiquetas"><span class="txt">Etiquetas de bagagem <span class="sub">(internas e externas)</span></span></label>
          <label><input type="checkbox" data-id="doc_comprovantes_app"><span class="txt">Passagens e comprovantes de reserva no app <span class="sub">(voos, hot√©is, transfers, passeios)</span></span></label>
          <label><input type="checkbox" data-id="doc_rastreador"><span class="txt">Rastreador de bagagem</span></label>
          <label><input type="checkbox" data-id="doc_cadeados"><span class="txt">Cadeados</span></label>

          <div class="noteBox">
            <strong>IMPORTANTE (power bank):</strong> A ANAC imp√µe restri√ß√µes ao transporte de power banks em voos.
            Em geral, s√£o permitidos somente modelos de at√© <strong>25.000 mAh</strong> e apenas na <strong>bagagem de m√£o</strong>.
            Acima dessa capacidade, verifique as regras da companhia a√©rea antes do embarque.
          </div>
        </div>
      </details>

      <!-- BASE ‚Äî ITENS IMPORTANTES (MALA DE M√ÉO) -->
      <details>
        <summary>
          <div class="secTitle">Itens importantes (mala de m√£o)</div>
          <div class="count" data-count="mao">0/0</div>
        </summary>

        <div class="items">
          <div class="noteBox">
            <strong>Lembrete:</strong> evite itens de valor na mala de bordo ‚Äî pode ser exigido o despacho.
            Deixe itens essenciais no item pessoal (bolsa/mochila pequena), que permanece com voc√™ o tempo todo.
            <br><strong>Viagem internacional?</strong> Marque ‚ÄúViagem internacional‚Äù nos extras para aparecer a regra de l√≠quidos (100 ml).
          </div>

          <label><input type="checkbox" data-id="mao_escova_pasta"><span class="txt">Escova/pasta de dente</span></label>
          <label><input type="checkbox" data-id="mao_desodorante"><span class="txt">Desodorante roll-on/creme</span></label>
          <label><input type="checkbox" data-id="mao_hidratante"><span class="txt">Hidratante facial/labial</span></label>
          <label><input type="checkbox" data-id="mao_casaco_leve"><span class="txt">Casaco leve</span></label>
          <label><input type="checkbox" data-id="mao_conforto"><span class="txt">Almofada de pesco√ßo, m√°scara de dormir, protetor auricular</span></label>
          <label><input type="checkbox" data-id="mao_kindle"><span class="txt">Livro/Kindle</span></label>
          <label><input type="checkbox" data-id="mao_fone"><span class="txt">Fone de ouvido</span></label>
          <label><input type="checkbox" data-id="mao_cabos"><span class="txt">Cabo e carregador</span></label>
          <label><input type="checkbox" data-id="mao_adaptador"><span class="txt">Adaptador de tomada</span></label>
          <label><input type="checkbox" data-id="mao_caneta"><span class="txt">Caneta</span></label>
          <label><input type="checkbox" data-id="mao_joias"><span class="txt">Joias/bijuterias</span></label>
          <label><input type="checkbox" data-id="mao_make"><span class="txt">Maquiagem</span></label>
          <label><input type="checkbox" data-id="mao_oculos_grau"><span class="txt">√ìculos de grau</span></label>
          <label><input type="checkbox" data-id="mao_oculos_sol"><span class="txt">√ìculos escuros</span></label>
          <label><input type="checkbox" data-id="mao_roupa_reserva"><span class="txt">Roupa reserva em caso de extravio <span class="sub">(1 troca completa)</span></span></label>
          <label><input type="checkbox" data-id="mao_absorvente"><span class="txt">Absorvente √≠ntimo</span></label>
          <label><input type="checkbox" data-id="mao_guarda_chuva"><span class="txt">Guarda-chuva</span></label>
          <label><input type="checkbox" data-id="mao_meds_comuns"><span class="txt">Medicamentos comuns <span class="sub">(antiem√©tico, antigases, antidiarreico, analg√©sico, antigripal, pastilha, anti√°cido)</span></span></label>
          <label><input type="checkbox" data-id="mao_meds_continuo"><span class="txt">Medicamentos de uso cont√≠nuo</span></label>
          <label><input type="checkbox" data-id="mao_meds_controlados"><span class="txt">Medicamentos controlados <span class="sub">(com receita)</span></span></label>
        </div>
      </details>

      <!-- BASE ‚Äî NECESSAIRES -->
      <details>
        <summary>
          <div class="secTitle">Necessaires (dentro da mala)</div>
          <div class="count" data-count="nec">0/0</div>
        </summary>

        <div class="items">
          <div class="subsectionTitle">Banho</div>
          <label><input type="checkbox" data-id="nec_b_shampoo"><span class="txt">Shampoo</span></label>
          <label><input type="checkbox" data-id="nec_b_condicionador"><span class="txt">Condicionador</span></label>
          <label><input type="checkbox" data-id="nec_b_sabonete"><span class="txt">Sabonete</span></label>
          <label><input type="checkbox" data-id="nec_b_escova_pasta"><span class="txt">Escova/pasta de dente</span></label>

          <div class="subsectionTitle">Cuidados</div>
          <label><input type="checkbox" data-id="nec_c_leavein"><span class="txt">Leave-in</span></label>
          <label><input type="checkbox" data-id="nec_c_hidratante_corporal"><span class="txt">Hidratante corporal</span></label>
          <label><input type="checkbox" data-id="nec_c_skincare"><span class="txt">Skincare <span class="sub">(hidratante, limpador, demaquilante)</span></span></label>
          <label><input type="checkbox" data-id="nec_c_solar"><span class="txt">Protetor solar <span class="sub">(facial e corporal)</span></span></label>
          <label><input type="checkbox" data-id="nec_c_desodorante"><span class="txt">Desodorante <span class="sub">(pode ser aerossol)</span></span></label>
          <label><input type="checkbox" data-id="nec_c_desodorante_pes"><span class="txt">Desodorante para os p√©s</span></label>
          <label><input type="checkbox" data-id="nec_c_cotonete"><span class="txt">Cotonete</span></label>

          <div class="subsectionTitle">Beleza</div>
          <label><input type="checkbox" data-id="nec_be_escova_pente"><span class="txt">Escova/pente</span></label>
          <label><input type="checkbox" data-id="nec_be_prendedores"><span class="txt">Prendedores de cabelo</span></label>
          <label><input type="checkbox" data-id="nec_be_perfume"><span class="txt">Perfume</span></label>
          <label><input type="checkbox" data-id="nec_be_lente_contato"><span class="txt">Lente de contato <span class="sub">(estojo e l√≠quido)</span></span></label>

          <div class="subsectionTitle">Emerg√™ncias</div>
          <label><input type="checkbox" data-id="nec_e_pinca_lixa"><span class="txt">Pin√ßa/lixa de unha</span></label>
          <label><input type="checkbox" data-id="nec_e_primeiros_socorros"><span class="txt">Kit de primeiros-socorros <span class="sub">(band-aid, esparadrapo, antiss√©ptico, gaze)</span></span></label>
          <label><input type="checkbox" data-id="nec_e_sacos_plasticos"><span class="txt">Saquinhos pl√°sticos</span></label>
          <label><input type="checkbox" data-id="nec_e_porta_roupa_suja"><span class="txt">Porta-roupa suja</span></label>
          <label><input type="checkbox" data-id="nec_e_repelente"><span class="txt">Repelente</span></label>
        </div>
      </details>

      <!-- BASE ‚Äî ROUPAS -->
      <details>
        <summary>
          <div class="secTitle">Roupas</div>
          <div class="count" data-count="r">0/0</div>
        </summary>

        <div class="items">
          <div class="subsectionTitle">√çntimos</div>
          <label><input type="checkbox" data-id="r_intimos"><span class="txt">Roupas de baixo <span class="sub">(calcinha, cueca, suti√£)</span></span></label>
          <label><input type="checkbox" data-id="r_meias"><span class="txt">Meias</span></label>
          <label><input type="checkbox" data-id="r_pijama"><span class="txt">Pijama/camisola</span></label>

          <div class="subsectionTitle">Geral</div>
          <label><input type="checkbox" data-id="r_calca_bermuda"><span class="txt">Cal√ßa/bermuda</span></label>
          <label><input type="checkbox" data-id="r_saia_shorts"><span class="txt">Saia (curta/longa)/shorts</span></label>
          <label><input type="checkbox" data-id="r_camisetas_blusas"><span class="txt">Camisetas e blusas</span></label>

          <div class="subsectionTitle">Acess√≥rios</div>
          <label><input type="checkbox" data-id="r_chinelo"><span class="txt">Chinelo</span></label>
          <label><input type="checkbox" data-id="r_calcados"><span class="txt">Sapato/bota/sand√°lia/t√™nis</span></label>
          <label><input type="checkbox" data-id="r_bolsa"><span class="txt">Bolsa</span></label>
          <label><input type="checkbox" data-id="r_acessorios_versateis"><span class="txt">Acess√≥rios vers√°teis <span class="sub">(len√ßos, cintos)</span></span></label>

          <div class="subsectionTitle">Praia/academia</div>
          <label><input type="checkbox" data-id="r_banho"><span class="txt">Roupas de banho <span class="sub">(biqu√≠nis, mai√¥s, sungas)</span></span></label>
          <label><input type="checkbox" data-id="r_saida_praia"><span class="txt">Sa√≠da de praia/bolsa de praia</span></label>
          <label><input type="checkbox" data-id="r_chapeu"><span class="txt">Chap√©u/bon√©</span></label>
          <label><input type="checkbox" data-id="r_academia"><span class="txt">Academia <span class="sub">(top/cal√ßa/blusa/t√™nis)</span></span></label>
        </div>
      </details>

      <!-- BASE ‚Äî ANTES DO EMBARQUE -->
      <details>
        <summary>
          <div class="secTitle">Antes do embarque</div>
          <div class="count" data-count="pre">0/0</div>
        </summary>

        <div class="items">
          <div class="subsectionTitle">Uma semana antes do embarque</div>
          <label><input type="checkbox" data-id="pre_pets"><span class="txt">Deixar a vida dos pets resolvida <span class="sub">(pet sitter, hotelzinho, ra√ß√£o, rotina e combinados)</span></span></label>
          <label><input type="checkbox" data-id="pre_receita"><span class="txt">Conferir se algum medicamento controlado precisa de receita especial para a viagem</span></label>
          <label><input type="checkbox" data-id="pre_pdf"><span class="txt">Entregar o PDF da Zest com os dados da sua viagem a algu√©m de confian√ßa</span></label>
          <label><input type="checkbox" data-id="pre_dinheiro"><span class="txt">Comprar moeda do destino <span class="sub">(inclusive trocados para gorjetas)</span></span></label>

          <div class="subsectionTitle">1 ou 2 dias antes</div>
          <label><input type="checkbox" data-id="pre_apps"><span class="txt">Baixar os apps necess√°rios e cadastrar o cart√£o de cr√©dito nos que forem necess√°rios</span></label>

          <div class="subsectionTitle>No dia da viagem</div>
          <label><input type="checkbox" data-id="pre_plantas"><span class="txt">Regar as plantas</span></label>
          <label><input type="checkbox" data-id="pre_pereciveis"><span class="txt">Jogar fora alimentos perec√≠veis que n√£o durem at√© a volta</span></label>
          <label><input type="checkbox" data-id="pre_lixo"><span class="txt">Esvaziar o lixo</span></label>
          <label><input type="checkbox" data-id="pre_docs_mao"><span class="txt">Documentos em m√£os? <span class="sub">(passaporte/RG, vacina, se aplic√°vel)</span></span></label>
        </div>
      </details>

      <!-- EXTRAS ‚Äî NACIONAL -->
      <details class="conditional" id="sec-nacional" hidden>
        <summary>
          <div class="secTitle">Extras ‚Äî viagem nacional</div>
          <div class="count" data-count="nac">0/0</div>
        </summary>
        <div class="items">
          <label><input type="checkbox" data-id="nac_cnh"><span class="txt">CNH f√≠sica <span class="sub">(se for alugar carro)</span></span></label>
          <label><input type="checkbox" data-id="nac_saude"><span class="txt">Cart√£o do conv√™nio / contatos de emerg√™ncia <span class="sub">(se fizer sentido)</span></span></label>
        </div>
      </details>

      <!-- EXTRAS ‚Äî INTERNACIONAL -->
      <details class="conditional" id="sec-internacional" hidden>
        <summary>
          <div class="secTitle">Extras ‚Äî viagem internacional</div>
          <div class="count" data-count="inter">0/0</div>
        </summary>
        <div class="items">
          <div class="noteBox">
            <strong>Regra de l√≠quidos (internacional):</strong> frascos de at√© <strong>100 ml</strong>, dentro de um saco/necessaire transparente.
            Aeross√≥is podem ser barrados.
          </div>

          <label><input type="checkbox" data-id="inter_chip_esim"><span class="txt">Chip internacional ou eSIM</span></label>
          <label><input type="checkbox" data-id="inter_civd"><span class="txt">Certificado Internacional de Vacina√ß√£o (CIVD) <span class="sub">(se aplic√°vel)</span></span></label>
          <label><input type="checkbox" data-id="inter_seguro"><span class="txt">Comprovante do seguro-viagem <span class="sub">(em papel ou no app)</span></span></label>
          <label><input type="checkbox" data-id="inter_pid"><span class="txt">Permiss√£o Internacional para Dirigir (PID) <span class="sub">(se for alugar carro)</span></span></label>
          <label><input type="checkbox" data-id="inter_cnh"><span class="txt">CNH f√≠sica <span class="sub">(se for alugar carro)</span></span></label>
          <label><input type="checkbox" data-id="inter_adaptador"><span class="txt">Adaptador de tomada</span></label>
          <label><input type="checkbox" data-id="inter_moeda"><span class="txt">Moeda / forma de pagamento <span class="sub">(incluindo trocados para gorjetas)</span></span></label>
          <label><input type="checkbox" data-id="inter_docs_offline"><span class="txt">Documentos importantes salvos offline <span class="sub">(passaporte, seguro, reservas)</span></span></label>
        </div>
      </details>

      <!-- EXTRAS ‚Äî CALOR -->
      <details class="conditional" id="sec-calor" hidden>
        <summary>
          <div class="secTitle">Extras ‚Äî calor</div>
          <div class="count" data-count="calor">0/0</div>
        </summary>
        <div class="items">
          <label><input type="checkbox" data-id="calor_casaco_fino"><span class="txt">Casaco fino <span class="sub">(para o ar-condicionado)</span></span></label>
          <label><input type="checkbox" data-id="calor_pos_sol"><span class="txt">Shampoo e condicionador p√≥s-sol</span></label>
          <label><input type="checkbox" data-id="calor_sacos_molhadas"><span class="txt">Sacos para roupas molhadas</span></label>
        </div>
      </details>

      <!-- EXTRAS ‚Äî MEIA-ESTA√á√ÉO -->
      <details class="conditional" id="sec-meia" hidden>
        <summary>
          <div class="secTitle">Extras ‚Äî meia-esta√ß√£o</div>
          <div class="count" data-count="meia">0/0</div>
        </summary>
        <div class="items">
          <label><input type="checkbox" data-id="meia_camadas"><span class="txt">Camadas leves <span class="sub">(uma blusa extra ‚Äúcoringa‚Äù)</span></span></label>
          <label><input type="checkbox" data-id="meia_capa_chuva"><span class="txt">Capa de chuva compacta / guarda-chuva pequeno</span></label>
        </div>
      </details>

      <!-- EXTRAS ‚Äî FRIO -->
      <details class="conditional" id="sec-frio" hidden>
        <summary>
          <div class="secTitle">Extras ‚Äî frio</div>
          <div class="count" data-count="frio">0/0</div>
        </summary>
        <div class="items">
          <label><input type="checkbox" data-id="frio_hidratacao"><span class="txt">Hidratante labial, creme para as m√£os</span></label>
          <label><input type="checkbox" data-id="frio_segunda_pele"><span class="txt">Segunda pele t√©rmica</span></label>
          <label><input type="checkbox" data-id="frio_sueteres"><span class="txt">Malhas, su√©teres e blusas quentes</span></label>
          <label><input type="checkbox" data-id="frio_casaco_impermeavel"><span class="txt">Casaco pesado imperme√°vel</span></label>
          <label><input type="checkbox" data-id="frio_calcas_termicas"><span class="txt">Cal√ßas t√©rmicas</span></label>
          <label><input type="checkbox" data-id="frio_botas"><span class="txt">Botas imperme√°veis</span></label>
          <label><input type="checkbox" data-id="frio_compressao"><span class="txt">Sacos de compress√£o <span class="sub">(para roupas volumosas)</span></span></label>
        </div>
      </details>

      <!-- EXTRAS ‚Äî NEVE / ESQUI -->
      <details class="conditional" id="sec-neve" hidden>
        <summary>
          <div class="secTitle">Extras ‚Äî neve / esqui</div>
          <div class="count" data-count="neve">0/0</div>
        </summary>
        <div class="items">
          <label><input type="checkbox" data-id="neve_luvas_imper"><span class="txt">Luvas imperme√°veis</span></label>
          <label><input type="checkbox" data-id="neve_oculos"><span class="txt">√ìculos de neve / √≥culos de sol com boa prote√ß√£o</span></label>
          <label><input type="checkbox" data-id="neve_protetor"><span class="txt">Protetor solar <span class="sub">(o reflexo na neve engana!)</span></span></label>
          <label><input type="checkbox" data-id="neve_meias_termicas"><span class="txt">Meias t√©rmicas</span></label>
        </div>
      </details>

      <!-- EXTRAS ‚Äî PRAIA -->
      <details class="conditional" id="sec-praia" hidden>
        <summary>
          <div class="secTitle">Extras ‚Äî praia</div>
          <div class="count" data-count="praia">0/0</div>
        </summary>
        <div class="items">
          <label><input type="checkbox" data-id="praia_bolsa"><span class="txt">Bolsa de praia</span></label>
          <label><input type="checkbox" data-id="praia_saida"><span class="txt">Sa√≠da de praia</span></label>
          <label><input type="checkbox" data-id="praia_chapeu"><span class="txt">Chap√©u/bon√©</span></label>
          <label><input type="checkbox" data-id="praia_possol"><span class="txt">P√≥s-sol / hidratante refor√ßado</span></label>
        </div>
      </details>

      <!-- EXTRAS ‚Äî CIDADE -->
      <details class="conditional" id="sec-cidade" hidden>
        <summary>
          <div class="secTitle">Extras ‚Äî cidade</div>
          <div class="count" data-count="cidade">0/0</div>
        </summary>
        <div class="items">
          <label><input type="checkbox" data-id="cidade_calcado"><span class="txt">Cal√ßado confort√°vel para caminhar bastante</span></label>
          <label><input type="checkbox" data-id="cidade_capa"><span class="txt">Capa de chuva compacta / guarda-chuva pequeno</span></label>
        </div>
      </details>

      <!-- EXTRAS ‚Äî NATUREZA/CAMPO -->
      <details class="conditional" id="sec-natureza" hidden>
        <summary>
          <div class="secTitle">Extras ‚Äî natureza / campo</div>
          <div class="count" data-count="natureza">0/0</div>
        </summary>
        <div class="items">
          <label><input type="checkbox" data-id="natureza_rep"><span class="txt">Repelente refor√ßado</span></label>
          <label><input type="checkbox" data-id="natureza_tenis"><span class="txt">T√™nis/ bota confort√°vel <span class="sub">(se tiver trilhas)</span></span></label>
          <label><input type="checkbox" data-id="natureza_lanterna"><span class="txt">Lanterna pequena <span class="sub">(se fizer sentido)</span></span></label>
        </div>
      </details>

      <!-- EXTRAS ‚Äî CRUZEIRO -->
      <details class="conditional" id="sec-cruzeiro" hidden>
        <summary>
          <div class="secTitle">Extras ‚Äî cruzeiro</div>
          <div class="count" data-count="cruz">0/0</div>
        </summary>
        <div class="items">
          <label><input type="checkbox" data-id="cruz_enjoo"><span class="txt">Rem√©dio para enjoo <span class="sub">(converse com seu m√©dico)</span></span></label>
          <label><input type="checkbox" data-id="cruz_traje"><span class="txt">Roupa para noite/ jantar <span class="sub">(se o cruzeiro pedir)</span></span></label>
          <label><input type="checkbox" data-id="cruz_chinelo"><span class="txt">Chinelo/ sand√°lia para √°reas molhadas</span></label>
        </div>
      </details>

      <!-- EXTRAS ‚Äî BEB√äS -->
      <details class="conditional" id="sec-bebe" hidden>
        <summary>
          <div class="secTitle">Extras ‚Äî beb√™s (0‚Äì2)</div>
          <div class="count" data-count="bebe">0/0</div>
        </summary>
        <div class="items">
          <label><input type="checkbox" data-id="bebe_fraldas"><span class="txt">Fraldas / len√ßos / trocador</span></label>
          <label><input type="checkbox" data-id="bebe_roupas"><span class="txt">Trocas extras de roupa</span></label>
          <label><input type="checkbox" data-id="bebe_mamadeira"><span class="txt">Mamadeira/ copinho/ f√≥rmula <span class="sub">(se usar)</span></span></label>
          <label><input type="checkbox" data-id="bebe_soneca"><span class="txt">Itens de sono <span class="sub">(paninho, chupeta, etc.)</span></span></label>
        </div>
      </details>

      <!-- EXTRAS ‚Äî CRIAN√áAS -->
      <details class="conditional" id="sec-crianca" hidden>
        <summary>
          <div class="secTitle">Extras ‚Äî crian√ßas (3‚Äì12)</div>
          <div class="count" data-count="crianca">0/0</div>
        </summary>
        <div class="items">
          <label><input type="checkbox" data-id="crianca_docs"><span class="txt">Documentos da crian√ßa <span class="sub">(RG/passaporte, autoriza√ß√µes, se aplic√°vel)</span></span></label>
          <label><input type="checkbox" data-id="crianca_lanches"><span class="txt">Lanchinhos e garrafinha</span></label>
          <label><input type="checkbox" data-id="crianca_entreten"><span class="txt">Entretenimento para o caminho <span class="sub">(livrinho, brinquedo pequeno, fone)</span></span></label>
          <label><input type="checkbox" data-id="crianca_meds"><span class="txt">Medicamentos essenciais / receitinha <span class="sub">(se necess√°rio)</span></span></label>
        </div>
      </details>

      <!-- ANOTA√á√ïES -->
      <div class="notesWrap">
        <div class="notesTitle">üìù Anota√ß√µes</div>
        <textarea id="notesText" placeholder="Escreva aqui observa√ß√µes, itens para comprar, ideias de looks, etc."></textarea>
      </div>

      <footer>
        As marca√ß√µes e anota√ß√µes ficam salvas neste celular/navegador.

        <div class="pagebreak"></div>

        <div class="sig">
          <strong>Zest Est√∫dio de Viagens de Luxo.</strong><br>
          <strong>O puro prazer de viajar.</strong>
        </div>
      </footer>
    </div>
  </div>

  <script>
    // Chave por p√°gina
    const pageKey = "zest__" + (location.pathname.split("/").pop() || "index") + "__v_extras_dep_01__";
    const sk = (id) => pageKey + id;

    function syncStrike(box){
      const lab = box.closest("label");
      if(!lab) return;
      lab.classList.toggle("checked", box.checked);
    }

    // Anota√ß√µes (texto)
    const notesText = document.getElementById("notesText");
    notesText.value = localStorage.getItem(sk("notesText")) || "";
    notesText.addEventListener("input", () => localStorage.setItem(sk("notesText"), notesText.value));

    // Itens do checklist
    const itemBoxes = Array.from(document.querySelectorAll('input[type="checkbox"][data-id]'));
    itemBoxes.forEach(box => {
      const key = sk(box.dataset.id);
      box.checked = localStorage.getItem(key) === "true";
      syncStrike(box);

      box.addEventListener("change", () => {
        localStorage.setItem(key, box.checked);
        syncStrike(box);

        // Se o usu√°rio marcou manualmente um toggle-depend√™ncia (ex: FRIO), removemos o "auto"
        if(box.classList.contains("gateToggle")){
          // nada aqui (gateToggle √© separado)
        }
        updateCounts();
      });
    });

    // Contadores por prefixo
    function updateCounts(){
      document.querySelectorAll("[data-count]").forEach(el=>{
        const prefix = el.getAttribute("data-count");
        const group = itemBoxes.filter(b => (b.dataset.id || "").startsWith(prefix));
        const done = group.filter(b => b.checked).length;
        el.textContent = `${done}/${group.length}`;
      });
    }
    updateCounts();

    // Gate toggles
    const gateToggles = Array.from(document.querySelectorAll('input[type="checkbox"].gateToggle'));

    function setSectionVisible(sectionId, visible){
      const sec = document.getElementById(sectionId);
      if(!sec) return;
      sec.hidden = !visible;
    }

    function clearByPrefix(prefix){
      const targets = itemBoxes.filter(b => (b.dataset.id || "").startsWith(prefix));
      targets.forEach(b=>{
        localStorage.removeItem(sk(b.dataset.id));
        b.checked = false;
        syncStrike(b);
      });
    }

    function getGateById(gateId){
      return gateToggles.find(t => t.dataset.gateId === gateId) || null;
    }

    // Flags de "ativa√ß√£o autom√°tica"
    const AUTO_FRIO_BY_NEVE = sk("auto_frio_by_neve");
    const AUTO_CALOR_BY_PRAIA = sk("auto_calor_by_praia");

    function setAutoFlag(flagKey, val){
      if(val) localStorage.setItem(flagKey, "true");
      else localStorage.removeItem(flagKey);
    }
    function getAutoFlag(flagKey){
      return localStorage.getItem(flagKey) === "true";
    }

    // Aplicar depend√™ncias (ativar automaticamente)
    function ensureChecked(gateId, autoFlagKey){
      const tg = getGateById(gateId);
      if(!tg) return;

      if(!tg.checked){
        tg.checked = true;
        localStorage.setItem(sk(tg.dataset.gateId), "true");
        setSectionVisible(tg.dataset.show, true);
        setAutoFlag(autoFlagKey, true);
      }
    }

    // Ao desligar "pai", perguntar se mant√©m o "dependente" caso ele tenha sido auto-ativado
    function maybeKeepDependent(depGateId, autoFlagKey, message){
      const dep = getGateById(depGateId);
      if(!dep) return;

      if(dep.checked && getAutoFlag(autoFlagKey)){
        const keep = confirm(message);
        if(!keep){
          // desliga dependente + limpa itens do prefixo dele
          dep.checked = false;
          localStorage.setItem(sk(dep.dataset.gateId), "false");
          setSectionVisible(dep.dataset.show, false);
          if(dep.dataset.prefix) clearByPrefix(dep.dataset.prefix);
        }
        // de qualquer forma, deixa de ser "auto"
        setAutoFlag(autoFlagKey, false);
      }
    }

    // Restaurar estado dos toggles + visibilidade
    gateToggles.forEach(tg => {
      tg.checked = localStorage.getItem(sk(tg.dataset.gateId)) === "true";
      setSectionVisible(tg.dataset.show, tg.checked);
    });

    // Se o usu√°rio j√° tinha NEVE/PRAIA marcados, garante depend√™ncias ao carregar
    const tgNeve = getGateById("gate_neve");
    const tgFrio = getGateById("gate_frio");
    if(tgNeve?.checked && !tgFrio?.checked){
      ensureChecked("gate_frio", AUTO_FRIO_BY_NEVE);
    }

    const tgPraia = getGateById("gate_praia");
    const tgCalor = getGateById("gate_calor");
    if(tgPraia?.checked && !tgCalor?.checked){
      ensureChecked("gate_calor", AUTO_CALOR_BY_PRAIA);
    }

    // Se o usu√°rio marcou FRIO/CALOR manualmente em algum momento, remove o auto-flag
    function manualOverrideWatcher(){
      const frio = getGateById("gate_frio");
      const calor = getGateById("gate_calor");

      frio?.addEventListener("change", () => {
        if(frio.checked) setAutoFlag(AUTO_FRIO_BY_NEVE, false);
      });
      calor?.addEventListener("change", () => {
        if(calor.checked) setAutoFlag(AUTO_CALOR_BY_PRAIA, false);
      });
    }
    manualOverrideWatcher();

    // Handler de change dos toggles
    gateToggles.forEach(tg => {
      tg.addEventListener("change", () => {
        localStorage.setItem(sk(tg.dataset.gateId), tg.checked);
        setSectionVisible(tg.dataset.show, tg.checked);

        // Se desmarcou: limpa checks daquela se√ß√£o extra
        if(!tg.checked && tg.dataset.prefix){
          clearByPrefix(tg.dataset.prefix);
          updateCounts();
        }

        // DEPEND√äNCIAS
        // Neve -> Frio
        if(tg.dataset.gateId === "gate_neve" && tg.checked){
          ensureChecked("gate_frio", AUTO_FRIO_BY_NEVE);
          updateCounts();
        }
        if(tg.dataset.gateId === "gate_neve" && !tg.checked){
          maybeKeepDependent("gate_frio", AUTO_FRIO_BY_NEVE, "Voc√™ desmarcou ‚ÄúNeve / esqui‚Äù.\nDeseja manter os itens de ‚ÄúFrio‚Äù?");
          updateCounts();
        }

        // Praia -> Calor
        if(tg.dataset.gateId === "gate_praia" && tg.checked){
          ensureChecked("gate_calor", AUTO_CALOR_BY_PRAIA);
          updateCounts();
        }
        if(tg.dataset.gateId === "gate_praia" && !tg.checked){
          maybeKeepDependent("gate_calor", AUTO_CALOR_BY_PRAIA, "Voc√™ desmarcou ‚ÄúPraia‚Äù.\nDeseja manter os itens de ‚ÄúCalor‚Äù?");
          updateCounts();
        }
      });
    });

    // Abrir/fechar tudo (s√≥ details vis√≠veis)
    function visibleDetails(){
      return Array.from(document.querySelectorAll("details")).filter(d => !d.hidden);
    }
    document.getElementById("expandAll").addEventListener("click", () => {
      visibleDetails().forEach(d => d.open = true);
    });
    document.getElementById("collapseAll").addEventListener("click", () => {
      visibleDetails().forEach(d => d.open = false);
    });

    // Zerar tudo (inclui toggles + anota√ß√µes)
    document.getElementById("clearAll").addEventListener("click", () => {
      if(!confirm("Desmarcar tudo (incluindo os itens extras) e apagar as anota√ß√µes?")) return;

      // itens checklist
      itemBoxes.forEach(b=>{
        localStorage.removeItem(sk(b.dataset.id));
        b.checked = false;
        syncStrike(b);
      });

      // toggles + esconder se√ß√µes + limpar auto flags
      gateToggles.forEach(tg=>{
        localStorage.removeItem(sk(tg.dataset.gateId));
        tg.checked = false;
        setSectionVisible(tg.dataset.show, false);
      });
      setAutoFlag(AUTO_FRIO_BY_NEVE, false);
      setAutoFlag(AUTO_CALOR_BY_PRAIA, false);

      // anota√ß√µes
      localStorage.removeItem(sk("notesText"));
      notesText.value = "";

      updateCounts();
    });

    // Atualiza counts ao final (caso algo tenha sido auto-ativado no load)
    updateCounts();
  </script>
</body>
</html>
