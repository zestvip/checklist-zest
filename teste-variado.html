<!doctype html>
<html lang="pt-br">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Checklist Zest ‚Äî Personalizado</title>

  <style>
    :root{
      /* Base Zest */
      --bg:    #B3D9EB;
      --card:  #F9F7E1;
      --text:  #1f1f1f;
      --muted: #6b7280;

      /* Estrutura */
      --line:   #e4e2cf;
      --pill:   #f1f2ec;
      --radius: 18px;
      --shadow: 0 6px 18px rgba(0,0,0,.06);

      /* Marca */
      --accent: #B3D9EB;
      --deep:   #123826;
      --highlight: #00BDA9;
      --warning-bg: #fff3cd;
      --warning-text: #856404;
    }

    *{ box-sizing:border-box; }

    body{
      margin:0;
      background:var(--bg);
      color:var(--text);
      font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Inter,Arial,sans-serif;
      line-height:1.5;
      padding:18px;
      padding-bottom: 80px; /* Espa√ßo para footer */
    }

    .wrap{ max-width:600px; margin:0 auto; }

    .card{
      background:var(--card);
      border:1px solid var(--line);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      overflow:hidden;
      margin-bottom: 20px;
    }

    /* --- PAINEL DE CONFIGURA√á√ÉO (WIZARD) --- */
    .config-panel {
      background: #fff;
      border-bottom: 2px solid var(--line);
      padding: 0;
    }
    .config-header {
      padding: 18px;
      background: var(--deep);
      color: #fff;
      display: flex;
      justify-content: space-between;
      align-items: center;
      cursor: pointer;
    }
    .config-header h2 { margin:0; font-size: 16px; font-weight: 600; letter-spacing: 0.5px; }
    .config-body {
      padding: 18px;
      display: block; 
    }
    .config-body.closed { display: none; }
    
    .step-group { margin-bottom: 20px; border-bottom:1px dashed var(--line); padding-bottom:16px; }
    .step-group:last-child { border:0; margin:0; padding:0; }
    .step-title { 
      font-weight: 700; font-size: 12px; text-transform: uppercase; 
      letter-spacing: 1px; color: var(--muted); margin-bottom: 10px; 
    }
    
    .radio-group, .check-group { display: flex; flex-wrap: wrap; gap: 8px; }
    
    /* Bot√µes de Sele√ß√£o */
    .selector-label {
      cursor: pointer;
      font-size: 13px;
      padding: 8px 14px;
      border: 1px solid var(--line);
      border-radius: 8px;
      background: var(--pill);
      transition: all 0.2s;
      user-select: none;
      display: flex;
      align-items: center;
      gap: 6px;
    }
    .selector-label:hover { background: #e2e4dc; }
    .selector-label input { display: none; }
    
    /* Estado Selecionado */
    .selector-label:has(input:checked) {
      background: var(--accent);
      border-color: var(--deep);
      color: var(--deep);
      font-weight: 600;
      box-shadow: 0 2px 5px rgba(0,0,0,0.05);
    }

    .primary-btn { 
      background: var(--deep); color: #fff; border:none; 
      width: 100%; margin-top:10px; padding: 12px; border-radius: 12px;
      font-weight: 600; cursor: pointer; font-size: 14px;
    }
    .primary-btn:hover { background: #0f2e20; transform: translateY(-1px); }

    /* --- CONTE√öDO DO CHECKLIST --- */
    header{ padding:24px 18px 18px 18px; border-bottom:1px solid var(--line); text-align: center; }
    .brand { margin-bottom: 12px; }
    .brand-text { font-weight: 900; color: var(--deep); font-size: 26px; letter-spacing: -1px; }
    
    h1{ font-size:18px; margin:0; color: var(--deep); }
    .subtitle{ margin:8px 0 0 0; color:var(--muted); font-size:13px; max-width: 400px; margin-left: auto; margin-right: auto;}

    .actions{ display:flex; gap:10px; padding:12px 18px; border-bottom:1px solid var(--line); flex-wrap:wrap; justify-content: center;}
    button.ghost{
      background:transparent; border:1px solid transparent; color: var(--muted);
      font-size: 12px; cursor: pointer; padding: 6px 10px; border-radius: 6px;
    }
    button.ghost:hover{ background: rgba(0,0,0,0.03); color: var(--deep); }
    
    #clearAll {
      background: #fff; border: 1px solid var(--line); color: var(--deep);
      padding: 6px 12px; border-radius: 6px; font-size: 12px; cursor: pointer; margin-left: auto;
    }

    details{ border-bottom:1px solid var(--line); padding:0 18px; transition: all 0.2s; }
    details[open] { background: rgba(255,255,255,0.4); }
    
    summary{
      list-style:none; cursor:pointer; padding:16px 0;
      display:flex; align-items:center; justify-content:space-between; gap:10px; user-select:none;
    }
    summary::-webkit-details-marker{ display:none; }

    .secTitle{ display:flex; gap:10px; align-items:center; font-weight:700; font-size:15px; color: var(--deep); }
    .count{
      font-size:11px; color:var(--muted); background:#fff;
      border:1px solid var(--line); padding:2px 8px; border-radius:999px; white-space:nowrap;
    }

    .items{ padding:0 0 16px 0; display:flex; flex-direction:column; gap:8px; }

    /* Estilo do Item (Label) */
    label.item-row {
      display:flex; gap:12px; align-items:flex-start; padding:12px;
      border:1px solid transparent; border-radius:12px; background: #fff;
      transition: all 0.15s ease;
      box-shadow: 0 1px 2px rgba(0,0,0,0.02);
    }
    label.item-row:hover{ border-color: var(--accent); }
    label.item-row.hidden { display: none !important; }

    input[type="checkbox"]{ 
      margin-top:3px; width:18px; height:18px; flex:0 0 auto; 
      accent-color:var(--deep); cursor:pointer; 
    }

    .txt{ display:flex; flex-direction:column; gap:2px; font-size: 14px; color: #333; }
    .sub{ font-size:12px; color:var(--muted); margin-top: 1px;}
    
    label.checked{ opacity:0.6; background: transparent; box-shadow: none; }
    label.checked .txt{ text-decoration:line-through; }

    /* Avisos Importantes */
    .warning-box {
      background-color: var(--warning-bg);
      color: var(--warning-text);
      padding: 12px;
      border-radius: 8px;
      font-size: 12px;
      margin-top: 10px;
      border: 1px solid #ffeeba;
    }
    .warning-box strong { display: block; margin-bottom: 4px; }

    /* T√≠tulos de Subse√ß√£o */
    .subsection-title {
      font-size: 13px; font-weight: 700; color: var(--deep);
      margin: 16px 0 8px 0; text-transform: uppercase; letter-spacing: 0.5px;
      padding-bottom: 4px; border-bottom: 1px solid var(--line);
    }

    /* Rodap√© */
    .notesWrap{ padding:18px; border-bottom:1px solid var(--line); }
    .notesTitle{ margin:0 0 10px 0; font-weight:600; font-size:14px; color:var(--deep); }
    textarea{
      width:100%; min-height:100px; padding:12px;
      border:1px solid var(--line); border-radius:12px; font-size:14px;
      resize:vertical; outline:none; background:#fff; color:var(--text);
      font-family: inherit;
    }
    
    footer{ padding:20px; text-align: center; color:var(--muted); font-size:12px; }

  </style>
</head>

<body>
  <div class="wrap">
    
    <div class="card config-panel">
      <div class="config-header" id="toggleConfig">
        <h2>üõ†Ô∏è Personalizar Checklist</h2>
        <span>‚ñº</span>
      </div>
      <div class="config-body" id="configBody">
        
        <div class="step-group">
          <div class="step-title">1. Tipo de Viagem</div>
          <div class="radio-group">
            <label class="selector-label">
              <input type="radio" name="viagem_tipo" value="nac" checked> üáßüá∑ Nacional
            </label>
            <label class="selector-label">
              <input type="radio" name="viagem_tipo" value="int"> üåé Internacional
            </label>
          </div>
        </div>

        <div class="step-group">
          <div class="step-title">2. Quem vai?</div>
          <div class="check-group">
            <label class="selector-label">
              <input type="checkbox" name="perfil" value="baby"> Beb√™s (0-2)
            </label>
            <label class="selector-label">
              <input type="checkbox" name="perfil" value="child"> Crian√ßas (3-12)
            </label>
            <label class="selector-label">
              <input type="checkbox" name="perfil" value="teen"> Adolescentes (13-17)
            </label>
            <label class="selector-label">
              <input type="checkbox" name="perfil" value="work"> A Trabalho
            </label>
          </div>
        </div>

        <div class="step-group">
          <div class="step-title">3. Clima</div>
          <div class="radio-group">
            <label class="selector-label">
              <input type="radio" name="clima" value="calor" checked> ‚òÄÔ∏è Calor / Meia-esta√ß√£o
            </label>
            <label class="selector-label">
              <input type="radio" name="clima" value="frio"> ‚ùÑÔ∏è Frio
            </label>
            <label class="selector-label">
              <input type="radio" name="clima" value="neve"> ‚õ∑Ô∏è Neve
            </label>
          </div>
        </div>

        <div class="step-group">
          <div class="step-title">4. Estilo / Destino</div>
          <div class="check-group">
            <label class="selector-label">
              <input type="checkbox" name="destino" value="praia"> Praia / Piscina
            </label>
            <label class="selector-label">
              <input type="checkbox" name="destino" value="natureza"> Natureza / Trilhas
            </label>
            <label class="selector-label">
              <input type="checkbox" name="destino" value="cruzeiro"> Cruzeiro
            </label>
          </div>
        </div>

        <button class="primary-btn" id="applyConfig">Gerar Checklist</button>
      </div>
    </div>

    <div class="card">
      <header>
        <div class="brand">
          <div class="brand-text">ZEST</div>
        </div>
        <h1>Checklist de Viagem</h1>
        <p class="subtitle">Itens selecionados com base no seu roteiro e perfil.</p>
      </header>

      <div class="actions">
        <button id="expandAll" class="ghost" type="button">Abrir categorias</button>
        <button id="collapseAll" class="ghost" type="button">Fechar categorias</button>
        <button id="clearAll" type="button">Limpar tudo</button>
      </div>

      <details open>
        <summary>
          <div class="secTitle">1Ô∏è‚É£ Documentos e pr√°ticos</div>
          <div class="count" data-count="docs">0/0</div>
        </summary>
        <div class="items">
          
          <div data-logic="nac" class="logic-block">
            <label class="item-row"><input type="checkbox" data-id="doc_n_rg"><span class="txt">RG, CNH, carteira de trabalho ou passaporte <span class="sub">F√≠sico ou digital (app oficial)</span></span></label>
            <label class="item-row"><input type="checkbox" data-id="doc_n_credito"><span class="txt">Cart√£o de cr√©dito f√≠sico <span class="sub">(se for alugar carro)</span></span></label>
            <label class="item-row"><input type="checkbox" data-id="doc_n_cash"><span class="txt">Dinheiro em esp√©cie <span class="sub">Incluindo trocados para gorjetas</span></span></label>
            <label class="item-row"><input type="checkbox" data-id="doc_n_reservas"><span class="txt">Passagens e comprovantes de reserva <span class="sub">No app (voos, hot√©is, transfers)</span></span></label>
            <label class="item-row"><input type="checkbox" data-id="doc_n_tracker"><span class="txt">Rastreador de bagagem</span></label>
            <label class="item-row"><input type="checkbox" data-id="doc_n_cadeados"><span class="txt">Cadeados</span></label>
            
            <div class="warning-box">
              <strong>IMPORTANTE:</strong>
              A ANAC imp√µe restri√ß√µes ao transporte de power banks em voos. S√£o permitidos somente modelos de at√© 25.000 mAh e apenas na bagagem de m√£o.
            </div>
          </div>

          <div data-logic="int" class="logic-block">
            <label class="item-row"><input type="checkbox" data-id="doc_i_rg"><span class="txt">RG com at√© 10 anos de emiss√£o <span class="sub">(apenas para Mercosul)</span></span></label>
            <label class="item-row"><input type="checkbox" data-id="doc_i_pass"><span class="txt">Passaporte v√°lido <span class="sub">Com visto, se aplic√°vel</span></span></label>
            <label class="item-row"><input type="checkbox" data-id="doc_i_cnh"><span class="txt">CNH f√≠sica e PID <span class="sub">(se for alugar carro)</span></span></label>
            <label class="item-row"><input type="checkbox" data-id="doc_i_civd"><span class="txt">Certificado Internacional de Vacina√ß√£o (CIVD) <span class="sub">(se aplic√°vel)</span></span></label>
            <label class="item-row"><input type="checkbox" data-id="doc_i_liq"><span class="txt">L√≠quidos em frascos de at√© 100ml <span class="sub">Dentro de zip lock transparente. Aeross√≥is s√£o barrados.</span></span></label>
            <label class="item-row"><input type="checkbox" data-id="doc_i_cred"><span class="txt">Cart√µes de cr√©dito <span class="sub">Levar f√≠sico se for alugar carro</span></span></label>
            <label class="item-row"><input type="checkbox" data-id="doc_i_pre"><span class="txt">Cart√µes pr√©-pagos <span class="sub">Wise, Nomad, etc.</span></span></label>
            <label class="item-row"><input type="checkbox" data-id="doc_i_cash"><span class="txt">Dinheiro em esp√©cie <span class="sub">Incluindo trocados para gorjetas</span></span></label>
            <label class="item-row"><input type="checkbox" data-id="doc_i_chip"><span class="txt">Chip internacional ou eSIM</span></label>
            <label class="item-row"><input type="checkbox" data-id="doc_i_res"><span class="txt">Passagens e comprovantes de reserva <span class="sub">No app</span></span></label>
            <label class="item-row"><input type="checkbox" data-id="doc_i_track"><span class="txt">Rastreador de bagagem</span></label>
            <label class="item-row"><input type="checkbox" data-id="doc_i_cad"><span class="txt">Cadeados</span></label>
            <label class="item-row"><input type="checkbox" data-id="doc_i_adapt"><span class="txt">Adaptador de tomada</span></label>
            <label class="item-row"><input type="checkbox" data-id="doc_i_power"><span class="txt">Powerbank</span></label>
            
            <div class="warning-box">
              <strong>IMPORTANTE:</strong>
              A ANAC imp√µe restri√ß√µes ao transporte de power banks em voos. S√£o permitidos somente modelos de at√© 25.000 mAh e apenas na bagagem de m√£o.
            </div>
          </div>

          <label class="item-row" data-logic="baby child"><input type="checkbox" data-id="doc_crianca_docs"><span class="txt">Documentos da crian√ßa <span class="sub">RG/passaporte com visto</span></span></label>
          <label class="item-row" data-logic="baby child"><input type="checkbox" data-id="doc_crianca_cert"><span class="txt">C√≥pia autenticada da certid√£o de nascimento <span class="sub">Garantia extra</span></span></label>
          <label class="item-row" data-logic="baby child teen"><input type="checkbox" data-id="doc_menor_auth"><span class="txt">Autoriza√ß√£o de viagem para menor <span class="sub">Se necess√°rio</span></span></label>

          <label class="item-row" data-logic="work"><input type="checkbox" data-id="work_card"><span class="txt">Cart√£o corporativo</span></label>
          <label class="item-row" data-logic="work"><input type="checkbox" data-id="work_visit"><span class="txt">Cart√£o de visitas</span></label>
          <label class="item-row" data-logic="work"><input type="checkbox" data-id="work_docs"><span class="txt">Documentos salvos offline e em nuvem</span></label>

        </div>
      </details>

      <details>
        <summary>
          <div class="secTitle">2Ô∏è‚É£ Mala de m√£o</div>
          <div class="count" data-count="mao">0/0</div>
        </summary>
        <div class="items">
          
          <div data-logic="int" class="warning-box" style="margin-bottom:15px; border-color:var(--deep); background:#f1f8f6; color:var(--deep);">
            <strong>Regra Internacional:</strong> L√≠quidos s√≥ em frascos de at√© 100 ml dentro de zip lock transparente. Aeross√≥is barrados.
          </div>
          <div class="sub" style="margin-bottom:10px;">
            N√£o leve itens de valor nem laptops na bagagem despachada. Eles devem ir no item pessoal.
          </div>

          <label class="item-row"><input type="checkbox" data-id="mao_casaco"><span class="txt">Casaco leve</span></label>
          <label class="item-row"><input type="checkbox" data-id="mao_kindle"><span class="txt">Livro / Kindle</span></label>
          <label class="item-row"><input type="checkbox" data-id="mao_fone"><span class="txt">Fone de ouvido</span></label>
          <label class="item-row"><input type="checkbox" data-id="mao_cabo"><span class="txt">Cabo e carregador</span></label>
          <label class="item-row"><input type="checkbox" data-id="mao_caneta"><span class="txt">Caneta</span></label>
          <label class="item-row"><input type="checkbox" data-id="mao_joias"><span class="txt">Joias / Bijuterias</span></label>
          <label class="item-row"><input type="checkbox" data-id="mao_make"><span class="txt">Maquiagem</span></label>
          <label class="item-row"><input type="checkbox" data-id="mao_oculos"><span class="txt">√ìculos de grau</span></label>
          <label class="item-row"><input type="checkbox" data-id="mao_sol"><span class="txt">√ìculos escuros</span></label>
          <label class="item-row"><input type="checkbox" data-id="mao_reserva"><span class="txt">Roupa reserva <span class="sub">1 troca completa em caso de extravio</span></span></label>
          <label class="item-row"><input type="checkbox" data-id="mao_abs"><span class="txt">Absorvente √≠ntimo</span></label>
          <label class="item-row"><input type="checkbox" data-id="mao_chuva"><span class="txt">Guarda-chuva</span></label>
          <label class="item-row"><input type="checkbox" data-id="mao_meds"><span class="txt">Medicamentos comuns e cont√≠nuos <span class="sub">Comuns, uso cont√≠nuo e controlados</span></span></label>

          <label class="item-row" data-logic="int"><input type="checkbox" data-id="mao_escova"><span class="txt">Escova / Pasta de dente</span></label>
          <label class="item-row" data-logic="int"><input type="checkbox" data-id="mao_desod"><span class="txt">Desodorante roll-on/creme <span class="sub">N√£o pode aerossol</span></span></label>
          <label class="item-row" data-logic="int"><input type="checkbox" data-id="mao_hidra"><span class="txt">Hidratante facial / labial</span></label>
          <label class="item-row" data-logic="int"><input type="checkbox" data-id="mao_almofada"><span class="txt">Almofada de pesco√ßo / M√°scara / Protetor auricular</span></label>
          <label class="item-row" data-logic="int"><input type="checkbox" data-id="mao_adapt"><span class="txt">Adaptador de tomada</span></label>
          <label class="item-row" data-logic="int"><input type="checkbox" data-id="mao_med_rec"><span class="txt">Receita traduzida e CID <span class="sub">Para rem√©dios controlados</span></span></label>

          <label class="item-row" data-logic="work"><input type="checkbox" data-id="work_laptop"><span class="txt">Laptop, mouse e carregador</span></label>
          <label class="item-row" data-logic="work"><input type="checkbox" data-id="work_bloco"><span class="txt">Bloco de notas e caneta</span></label>
          <label class="item-row" data-logic="work"><input type="checkbox" data-id="work_materiais"><span class="txt">Materiais de trabalho</span></label>

          <label class="item-row" data-logic="baby child"><input type="checkbox" data-id="k_entretenimento"><span class="txt">Entretenimento <span class="sub">Livrinhos, brinquedos, tablet</span></span></label>
          <label class="item-row" data-logic="baby child"><input type="checkbox" data-id="k_mudas"><span class="txt">Duas mudas de roupa <span class="sub">Para a crian√ßa e para os adultos</span></span></label>
          <label class="item-row" data-logic="baby child"><input type="checkbox" data-id="k_petiscos"><span class="txt">Petiscos <span class="sub">Bolachas, sucos</span></span></label>
          <label class="item-row" data-logic="baby child"><input type="checkbox" data-id="k_lencos"><span class="txt">Len√ßos de papel e umedecidos</span></label>
          
        </div>
      </details>

      <details>
        <summary>
          <div class="secTitle">4Ô∏è‚É£ Necessaires (Mala)</div>
          <div class="count" data-count="nec">0/0</div>
        </summary>
        <div class="items">
          <div class="subsection-title">Banho</div>
          <label class="item-row"><input type="checkbox" data-id="nec_shampoo"><span class="txt">Shampoo / Condicionador</span></label>
          <label class="item-row"><input type="checkbox" data-id="nec_sabonete"><span class="txt">Sabonete / Esponja</span></label>
          <label class="item-row"><input type="checkbox" data-id="nec_boca"><span class="txt">Escova, pasta, fio dental, enxaguante</span></label>

          <div class="subsection-title">Cuidados</div>
          <label class="item-row"><input type="checkbox" data-id="nec_leavein"><span class="txt">Leave-in</span></label>
          <label class="item-row"><input type="checkbox" data-id="nec_hidra_corp"><span class="txt">Hidratante corporal</span></label>
          <label class="item-row"><input type="checkbox" data-id="nec_skincare"><span class="txt">Skincare <span class="sub">Hidratante, limpador, demaquilante</span></span></label>
          <label class="item-row"><input type="checkbox" data-id="nec_solar"><span class="txt">Protetor solar (facial e corporal)</span></label>
          <label class="item-row"><input type="checkbox" data-id="nec_desod"><span class="txt">Desodorante</span></label>
          <label class="item-row"><input type="checkbox" data-id="nec_pe"><span class="txt">Desodorante para os p√©s</span></label>
          <label class="item-row"><input type="checkbox" data-id="nec_cotonete"><span class="txt">Cotonete</span></label>

          <div class="subsection-title">Beleza / Emerg√™ncias</div>
          <label class="item-row"><input type="checkbox" data-id="nec_cabelo"><span class="txt">Escova/pente e prendedores</span></label>
          <label class="item-row"><input type="checkbox" data-id="nec_perfume"><span class="txt">Perfume</span></label>
          <label class="item-row"><input type="checkbox" data-id="nec_lente"><span class="txt">Lente de contato, estojo, l√≠quido</span></label>
          <label class="item-row"><input type="checkbox" data-id="nec_unha"><span class="txt">Pin√ßa / Lixa de unha</span></label>
          <label class="item-row"><input type="checkbox" data-id="nec_socorros"><span class="txt">Kit primeiros-socorros <span class="sub">Band-aid, antiss√©ptico, gaze</span></span></label>
          <label class="item-row"><input type="checkbox" data-id="nec_sacos"><span class="txt">Saquinhos pl√°sticos</span></label>
          <label class="item-row"><input type="checkbox" data-id="nec_suja"><span class="txt">Porta-roupa suja</span></label>
          <label class="item-row"><input type="checkbox" data-id="nec_repelente"><span class="txt">Repelente</span></label>
          
          <div data-logic="baby" class="logic-block">
             <div class="subsection-title">Beb√™</div>
             <label class="item-row"><input type="checkbox" data-id="baby_fraldas"><span class="txt">Fraldas, len√ßos, trocador</span></label>
             <label class="item-row"><input type="checkbox" data-id="baby_mama"><span class="txt">Mamadeira / Leite em p√≥ / F√≥rmula</span></label>
             <label class="item-row"><input type="checkbox" data-id="baby_sono"><span class="txt">Itens de sono <span class="sub">Paninho, chupeta, pel√∫cia</span></span></label>
             <label class="item-row"><input type="checkbox" data-id="baby_med"><span class="txt">Medicamentos essenciais <span class="sub">Antit√©rmico, term√¥metro (fale com pediatra)</span></span></label>
          </div>
          
          <div data-logic="child" class="logic-block">
            <label class="item-row"><input type="checkbox" data-id="child_med"><span class="txt">Medicamentos essenciais <span class="sub">Antit√©rmico, term√¥metro (fale com pediatra)</span></span></label>
          </div>

        </div>
      </details>

      <details>
        <summary>
          <div class="secTitle">5Ô∏è‚É£ Roupas e Acess√≥rios</div>
          <div class="count" data-count="roupas">0/0</div>
        </summary>
        <div class="items">
          
          <div class="subsection-title">B√°sico</div>
          <label class="item-row"><input type="checkbox" data-id="r_intimos"><span class="txt">Roupas de baixo <span class="sub">Calcinha, cueca, suti√£</span></span></label>
          <label class="item-row"><input type="checkbox" data-id="r_meias"><span class="txt">Meias</span></label>
          <label class="item-row"><input type="checkbox" data-id="r_pijama"><span class="txt">Pijama / Camisola</span></label>
          <label class="item-row"><input type="checkbox" data-id="r_banho"><span class="txt">Roupa de banho <span class="sub">Para hotel/spa</span></span></label>
          <label class="item-row"><input type="checkbox" data-id="r_chinelo"><span class="txt">Chinelo</span></label>
          <label class="item-row"><input type="checkbox" data-id="r_calcado"><span class="txt">Sapato / T√™nis / Sand√°lia</span></label>
          <label class="item-row"><input type="checkbox" data-id="r_bolsa"><span class="txt">Bolsa</span></label>
          <label class="item-row"><input type="checkbox" data-id="r_acess"><span class="txt">Acess√≥rios vers√°teis <span class="sub">Len√ßos, cintos</span></span></label>
          <label class="item-row"><input type="checkbox" data-id="r_academia"><span class="txt">Kit Academia <span class="sub">Top, cal√ßa, blusa, t√™nis</span></span></label>

          <div data-logic="calor" class="logic-block">
            <div class="subsection-title">Calor / Meia-Esta√ß√£o</div>
            <label class="item-row"><input type="checkbox" data-id="rc_casaco"><span class="txt">Casaco fino <span class="sub">Para ar-condicionado</span></span></label>
            <label class="item-row"><input type="checkbox" data-id="rc_baixo"><span class="txt">Saia / Shorts / Bermuda</span></label>
            <label class="item-row"><input type="checkbox" data-id="rc_calca"><span class="txt">Cal√ßa</span></label>
            <label class="item-row"><input type="checkbox" data-id="rc_cima"><span class="txt">Camisetas e blusas</span></label>
          </div>

          <div data-logic="frio neve" class="logic-block">
            <div class="subsection-title">Frio</div>
            <label class="item-row"><input type="checkbox" data-id="rf_acess"><span class="txt">Luva, Touca, Cachecol</span></label>
            <label class="item-row"><input type="checkbox" data-id="rf_segunda"><span class="txt">Segunda pele t√©rmica / Meia-cal√ßa</span></label>
            <label class="item-row"><input type="checkbox" data-id="rf_malha"><span class="txt">Malhas, su√©teres e blusas quentes</span></label>
            <label class="item-row"><input type="checkbox" data-id="rf_casacao"><span class="txt">Casaco pesado imperme√°vel</span></label>
            <label class="item-row"><input type="checkbox" data-id="rf_calca"><span class="txt">Cal√ßa t√©rmica</span></label>
            <label class="item-row"><input type="checkbox" data-id="rf_bota"><span class="txt">Bota imperme√°vel</span></label>
            <label class="item-row"><input type="checkbox" data-id="rf_saco"><span class="txt">Saco de compress√£o <span class="sub">Para roupas volumosas</span></span></label>
            <label class="item-row"><input type="checkbox" data-id="rf_creme"><span class="txt">Hidratante labial e m√£os <span class="sub">Na bolsa</span></span></label>
          </div>

          <div data-logic="neve" class="logic-block">
            <div class="subsection-title">Neve (Extras)</div>
            <label class="item-row"><input type="checkbox" data-id="rn_luvas"><span class="txt">Luvas imperme√°veis</span></label>
            <label class="item-row"><input type="checkbox" data-id="rn_oculos"><span class="txt">√ìculos de neve / Sol com prote√ß√£o</span></label>
            <label class="item-row"><input type="checkbox" data-id="rn_solar"><span class="txt">Protetor solar <span class="sub">O reflexo queima!</span></span></label>
            <label class="item-row"><input type="checkbox" data-id="rn_meias"><span class="txt">Meias t√©rmicas</span></label>
          </div>

          <div data-logic="praia" class="logic-block">
            <div class="subsection-title">Praia / Piscina</div>
            <label class="item-row"><input type="checkbox" data-id="dp_bolsa"><span class="txt">Bolsa de praia</span></label>
            <label class="item-row"><input type="checkbox" data-id="dp_saida"><span class="txt">Sa√≠da de praia</span></label>
            <label class="item-row"><input type="checkbox" data-id="dp_chapeu"><span class="txt">Chap√©u / Bon√©</span></label>
            <label class="item-row"><input type="checkbox" data-id="dp_pos"><span class="txt">Shampoo/Condicionador P√≥s-Sol</span></label>
            <label class="item-row"><input type="checkbox" data-id="dp_hidra"><span class="txt">Hidratante corporal refor√ßado</span></label>
            <label class="item-row"><input type="checkbox" data-id="dp_sacos"><span class="txt">Sacos para roupas molhadas</span></label>
          </div>

          <div data-logic="natureza" class="logic-block">
            <div class="subsection-title">Natureza / Trilhas</div>
            <label class="item-row"><input type="checkbox" data-id="dn_repelente"><span class="txt">Repelente</span></label>
            <label class="item-row"><input type="checkbox" data-id="dn_tenis"><span class="txt">T√™nis/bota confort√°vel para trilha</span></label>
          </div>

          <div data-logic="cruzeiro+calor" class="logic-block">
            <div class="subsection-title">Cruzeiro (Calor)</div>
            <label class="item-row"><input type="checkbox" data-id="cc_enjoo"><span class="txt">Rem√©dio para enjoo</span></label>
            <label class="item-row"><input type="checkbox" data-id="cc_formal"><span class="txt">Roupa/sapato formal <span class="sub">Para jantar</span></span></label>
            <label class="item-row"><input type="checkbox" data-id="cc_agasalho"><span class="txt">Agasalhos mais grossos <span class="sub">Para noite em alto-mar</span></span></label>
            <label class="item-row"><input type="checkbox" data-id="cc_papete"><span class="txt">Sapatos confort√°veis <span class="sub">Papetes/Rasteirinhas</span></span></label>
          </div>
          
          <div data-logic="cruzeiro+frio" class="logic-block">
            <div class="subsection-title">Cruzeiro (Frio)</div>
            <label class="item-row"><input type="checkbox" data-id="cf_enjoo"><span class="txt">Rem√©dio para enjoo</span></label>
            <label class="item-row"><input type="checkbox" data-id="cf_formal"><span class="txt">Roupa/sapato formal <span class="sub">Para jantar</span></span></label>
            <label class="item-row"><input type="checkbox" data-id="cf_confort"><span class="txt">Roupa confort√°vel e quente</span></label>
          </div>

          <div data-logic="work" class="logic-block">
            <div class="subsection-title">Trabalho</div>
            <label class="item-row"><input type="checkbox" data-id="wr_social"><span class="txt">Roupas sociais <span class="sub">Camisas, cal√ßas, vestidos</span></span></label>
            <label class="item-row"><input type="checkbox" data-id="wr_blazer"><span class="txt">Blazer / Casaco formal</span></label>
            <label class="item-row"><input type="checkbox" data-id="wr_sapato"><span class="txt">Sapato social</span></label>
            <label class="item-row"><input type="checkbox" data-id="wr_casual"><span class="txt">Roupas casuais para tempo livre</span></label>
          </div>

        </div>
      </details>

      <details>
        <summary>
          <div class="secTitle">6Ô∏è‚É£ Antes do embarque</div>
          <div class="count" data-count="pre">0/0</div>
        </summary>
        <div class="items">
          
          <div class="subsection-title">1 m√™s antes</div>
          <label class="item-row"><input type="checkbox" data-id="t1_bagagem"><span class="txt">Planejar bagagem <span class="sub">Comprar o que falta</span></span></label>
          <label class="item-row" data-logic="baby child"><input type="checkbox" data-id="t1_filhos"><span class="txt">Cancelar/reagendar atividades dos filhos</span></label>
          <label class="item-row"><input type="checkbox" data-id="t1_entregas"><span class="txt">Suspender entregas regulares <span class="sub">Jornais, assinaturas, etc.</span></span></label>

          <div class="subsection-title">1 semana antes</div>
          <label class="item-row"><input type="checkbox" data-id="t2_roteiro"><span class="txt">Compartilhar roteiro com amigos/fam√≠lia</span></label>
          <label class="item-row" data-logic="int"><input type="checkbox" data-id="t2_moeda"><span class="txt">Sacar moeda do destino e D√≥lares <span class="sub">Notas pequenas para gorjeta</span></span></label>
          <label class="item-row"><input type="checkbox" data-id="t2_taxi"><span class="txt">Reservar estacionamento ou t√°xi</span></label>
          <label class="item-row"><input type="checkbox" data-id="t2_pets"><span class="txt">Deixar vida dos pets resolvida</span></label>
          <label class="item-row"><input type="checkbox" data-id="t2_receita"><span class="txt">Conferir receitas de medicamentos</span></label>
          <label class="item-row"><input type="checkbox" data-id="t2_repor"><span class="txt">Repor medicamentos de uso cont√≠nuo</span></label>
          <label class="item-row"><input type="checkbox" data-id="t2_pdf"><span class="txt">Entregar PDF Zest a algu√©m de confian√ßa</span></label>

          <div class="subsection-title">1 a 2 dias antes</div>
          <label class="item-row"><input type="checkbox" data-id="t3_sep"><span class="txt">Separar documentos em local f√°cil</span></label>
          <label class="item-row"><input type="checkbox" data-id="t3_carga"><span class="txt">Carregar eletr√¥nicos e powerbanks</span></label>
          <label class="item-row"><input type="checkbox" data-id="t3_checkin"><span class="txt">Check-in do voo</span></label>
          <label class="item-row" data-logic="int"><input type="checkbox" data-id="t3_esim"><span class="txt">Ativar/Adquirir eSIM internacional</span></label>
          <label class="item-row" data-logic="int"><input type="checkbox" data-id="t3_banco"><span class="txt">Avisar banco sobre uso no exterior</span></label>
          <label class="item-row"><input type="checkbox" data-id="t3_apps"><span class="txt">Baixar apps e conte√∫do offline <span class="sub">Mapas, filmes, livros</span></span></label>

          <div class="subsection-title">No dia da viagem</div>
          <label class="item-row"><input type="checkbox" data-id="t4_iti"><span class="txt">Releia seu itiner√°rio Zest</span></label>
          <label class="item-row"><input type="checkbox" data-id="t4_plantas"><span class="txt">Regar plantas</span></label>
          <label class="item-row"><input type="checkbox" data-id="t4_janelas"><span class="txt">Fechar cortinas e travar janelas</span></label>
          <label class="item-row"><input type="checkbox" data-id="t4_foto"><span class="txt">Tirar foto do fog√£o/ferro/portas <span class="sub">Evita d√∫vidas depois!</span></span></label>
          <label class="item-row"><input type="checkbox" data-id="t4_lixo"><span class="txt">Tirar lixo e descartar perec√≠veis</span></label>
          <label class="item-row"><input type="checkbox" data-id="t4_trancar"><span class="txt">Trancar portas e ativar alarme</span></label>
          <label class="item-row" style="border-color:var(--deep); background:#f1f8f6"><input type="checkbox" data-id="t4_docs"><span class="txt" style="font-weight:700">Documentos em m√£os?</span></label>

        </div>
      </details>

      <div class="notesWrap">
        <div class="notesTitle">üìù Notas Pessoais</div>
        <textarea id="notesText" placeholder="Adicione itens extras ou lembretes aqui..."></textarea>
      </div>

      <footer>
        Zest Est√∫dio de Viagens de Luxo.<br>
        O puro prazer de viajar.
      </footer>
    </div>
  </div>

  <script>
    const pageKey = "zest_final_v1_";
    
    // --- L√ìGICA DO FILTRO (O C√©rebro) ---
    function applyFilters() {
      // 1. Ler Inputs
      const type = document.querySelector('input[name="viagem_tipo"]:checked').value; // nac, int
      const climate = document.querySelector('input[name="clima"]:checked').value; // calor, frio, neve
      
      const profiles = Array.from(document.querySelectorAll('input[name="perfil"]:checked')).map(el => el.value);
      const destinations = Array.from(document.querySelectorAll('input[name="destino"]:checked')).map(el => el.value);
      
      // Criar conjunto de tags ativas
      const activeTags = new Set([type, climate, ...profiles, ...destinations]);

      // Se usu√°rio escolheu Neve, logicamente items de Frio tamb√©m s√£o √∫teis?
      // Pelo prompt, "Neve - incluir tamb√©m". Ent√£o Neve implica Frio.
      if(climate === 'neve') activeTags.add('frio');

      // 2. Filtrar Itens
      // Seleciona todos os elementos que t√™m data-logic (itens individuais ou blocos div)
      const logicElements = document.querySelectorAll('[data-logic]');

      logicElements.forEach(el => {
        const logicString = el.getAttribute('data-logic');
        // Ex: "baby child" (OR)
        // Ex: "cruzeiro+calor" (AND)
        
        // Vamos quebrar por espa√ßo para ver as condi√ß√µes separadas
        const conditions = logicString.split(' ');
        
        let shouldShow = false;

        // Verifica cada condi√ß√£o. Se UMA for atendida, mostra (OR logic geral)
        for (let cond of conditions) {
          
          if (cond.includes('+')) {
            // L√≥gica AND interna (ex: cruzeiro+calor)
            const parts = cond.split('+');
            // Todas as partes devem estar em activeTags
            if (parts.every(p => activeTags.has(p))) {
              shouldShow = true;
              break; 
            }
          } else {
            // L√≥gica simples
            if (activeTags.has(cond)) {
              shouldShow = true;
              break;
            }
          }
        }

        if (shouldShow) {
          el.classList.remove('hidden');
        } else {
          el.classList.add('hidden');
        }
      });

      updateCounts();
      saveConfigState();
    }

    // --- INTERFACE & STORAGE ---
    const toggleConfig = document.getElementById('toggleConfig');
    const configBody = document.getElementById('configBody');
    const applyBtn = document.getElementById('applyConfig');

    toggleConfig.addEventListener('click', () => configBody.classList.toggle('closed'));
    
    applyBtn.addEventListener('click', () => {
      applyFilters();
      // Feedback visual simples
      applyBtn.innerText = "Atualizado!";
      setTimeout(() => applyBtn.innerText = "Gerar Checklist", 1500);
      configBody.classList.add('closed');
    });

    // Checkboxes do checklist
    const boxes = Array.from(document.querySelectorAll('.items input[type="checkbox"]'));

    function syncStrike(box){
      const lab = box.closest("label");
      if(!lab) return;
      lab.classList.toggle("checked", box.checked);
    }

    boxes.forEach(box => {
      const key = pageKey + box.dataset.id;
      box.checked = localStorage.getItem(key) === "true";
      syncStrike(box);

      box.addEventListener("change", () => {
        localStorage.setItem(key, box.checked);
        syncStrike(box);
        updateCounts();
      });
    });

    // Contadores Inteligentes (s√≥ contam vis√≠veis)
    function updateCounts(){
      document.querySelectorAll("[data-count]").forEach(el=>{
        const prefix = el.getAttribute("data-count");
        
        // Encontra checkboxes que correspondem ao prefixo
        const groupBoxes = boxes.filter(b => (b.dataset.id || "").startsWith(prefix));
        
        // Filtra apenas os que est√£o VIS√çVEIS (sem a classe hidden neles ou nos pais)
        const visibleBoxes = groupBoxes.filter(b => {
          // Checa se o pr√≥prio label est√° hidden
          if(b.closest('label').classList.contains('hidden')) return false;
          // Checa se est√° dentro de um div hidden
          if(b.closest('.logic-block') && b.closest('.logic-block').classList.contains('hidden')) return false;
          return true;
        });

        const done = visibleBoxes.filter(b => b.checked).length;
        el.textContent = `${done}/${visibleBoxes.length}`;
      });
    }

    // Persist√™ncia do Wizard
    function saveConfigState() {
      const configState = {
        tipo: document.querySelector('input[name="viagem_tipo"]:checked').value,
        clima: document.querySelector('input[name="clima"]:checked').value,
        perfis: Array.from(document.querySelectorAll('input[name="perfil"]:checked')).map(el => el.value),
        destinos: Array.from(document.querySelectorAll('input[name="destino"]:checked')).map(el => el.value)
      };
      localStorage.setItem(pageKey + 'config', JSON.stringify(configState));
    }

    function loadConfigState() {
      const saved = localStorage.getItem(pageKey + 'config');
      if (saved) {
        const config = JSON.parse(saved);
        const setRadio = (name, val) => {
          const el = document.querySelector(`input[name="${name}"][value="${val}"]`);
          if(el) el.checked = true;
        };
        const setCheck = (name, list) => {
          list.forEach(val => {
            const el = document.querySelector(`input[name="${name}"][value="${val}"]`);
            if(el) el.checked = true;
          });
        };

        setRadio("viagem_tipo", config.tipo);
        setRadio("clima", config.clima);
        setCheck("perfil", config.perfis);
        setCheck("destino", config.destinos);
      }
      applyFilters(); // Aplica filtros ao carregar
    }

    // Anota√ß√µes
    const notes = document.getElementById("notesText");
    notes.value = localStorage.getItem(pageKey + "notes") || "";
    notes.addEventListener("input", () => localStorage.setItem(pageKey + "notes", notes.value));

    // Bot√µes globais
    document.getElementById("clearAll").addEventListener("click", () => {
      if(!confirm("Limpar todas as marca√ß√µes?")) return;
      boxes.forEach(b => {
        b.checked = false;
        localStorage.removeItem(pageKey + b.dataset.id);
        syncStrike(b);
      });
      updateCounts();
    });

    document.getElementById("expandAll").addEventListener("click", () => document.querySelectorAll("details").forEach(d => d.open = true));
    document.getElementById("collapseAll").addEventListener("click", () => document.querySelectorAll("details").forEach(d => d.open = false));

    // Init
    loadConfigState();

  </script>
</body>
</html>
